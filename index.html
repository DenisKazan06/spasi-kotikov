<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∞—Å–∏ –∫–æ—Ç–∏–∫–æ–≤!</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        canvas {
            display: block;
            background-color: white;
        }
        #gameContainer {
            position: relative;
            width: 100%;
            height: 100vh;
        }
        .sound-control {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 5px;
            border-radius: 5px;
            cursor: pointer;
            z-index: 10;
        }
        #loading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 24px;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        <div class="sound-control" id="soundToggle">üîä</div>
        <div id="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...</div>
    </div>

    <script>
        // –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∏–≥—Ä—ã
        class SaveKittensGame {
            constructor() {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ö–æ–ª—Å—Ç–∞
                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.setCanvasSize();

                // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
                this.WHITE = '#FFFFFF';
                this.RED = '#C83232';
                this.GREEN = '#32C832';
                this.BLACK = '#000000';
                this.FPS = 60;

                // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
                this.gameState = 'menu'; // 'menu', 'game', 'gameOver'
                this.score = 0;
                this.level = 1;
                this.highscore = this.loadHighscore();
                this.kittens = [];
                this.crocs = [];
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
                this.loadResources();
                
                // –ó–≤—É–∫–∏
                this.soundEnabled = true;
                this.setupSounds();
                document.getElementById('soundToggle').addEventListener('click', () => this.toggleSound());
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
                window.addEventListener('resize', () => this.setCanvasSize());
                this.canvas.addEventListener('click', (e) => this.handleClick(e));
                this.canvas.addEventListener('touchstart', (e) => this.handleTouch(e));
                
                // –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
                this.lastTime = 0;
                requestAnimationFrame(this.gameLoop.bind(this));
            }
            
            setCanvasSize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
                this.WIDTH = this.canvas.width;
                this.HEIGHT = this.canvas.height;
            }
            
            loadResources() {
                this.images = {};
                this.imagesLoaded = 0;
                this.totalImages = 4;
                this.resourcesLoaded = false;
                
                const loadImage = (name, src) => {
                    this.images[name] = new Image();
                    this.images[name].src = src;
                    this.images[name].onload = () => {
                        this.imagesLoaded++;
                        if (this.imagesLoaded === this.totalImages) {
                            this.resourcesLoaded = true;
                            document.getElementById('loading').style.display = 'none';
                        }
                    };
                    this.images[name].onerror = () => {
                        console.error(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ${src}`);
                        this.imagesLoaded++;
                        if (this.imagesLoaded === this.totalImages) {
                            this.resourcesLoaded = true;
                            document.getElementById('loading').style.display = 'none';
                        }
                    };
                };
                
                // –ü—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º (–ø–∞–ø–∫–∞ images –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)
                loadImage('menuBg', 'images/menu_bg.png');
                loadImage('kitten', 'images/kitten.png');
                loadImage('croc', 'images/crocodile.png');
                loadImage('gameOverBg', 'images/game_over_bg.png');
            }
            
            setupSounds() {
                this.sounds = {};
                
                try {
                    this.backgroundMusic = new Audio('sounds/background_music.mp3');
                    this.backgroundMusic.loop = true;
                    this.backgroundMusic.volume = 0.5;
                    
                    this.sounds.click = new Audio('sounds/click.wav');
                    this.sounds.click.volume = 0.7;
                    
                    this.sounds.eat = new Audio('sounds/eat.wav');
                    this.sounds.eat.volume = 0.7;
                    
                    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –º—É–∑—ã–∫–∏ –ø–æ—Å–ª–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
                    const startAudio = () => {
                        if (this.soundEnabled) {
                            this.backgroundMusic.play().catch(e => console.log("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –º—É–∑—ã–∫–∏:", e));
                        }
                        document.removeEventListener('click', startAudio);
                        document.removeEventListener('touchstart', startAudio);
                    };
                    
                    document.addEventListener('click', startAudio);
                    document.addEventListener('touchstart', startAudio);
                } catch(e) {
                    console.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–≤—É–∫–∏:", e);
                }
            }
            
            toggleSound() {
                this.soundEnabled = !this.soundEnabled;
                document.getElementById('soundToggle').textContent = this.soundEnabled ? 'üîä' : 'üîá';
                
                if (this.soundEnabled) {
                    this.backgroundMusic.play().catch(e => console.log("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –º—É–∑—ã–∫–∏:", e));
                } else {
                    this.backgroundMusic.pause();
                }
            }
            
            playSound(sound) {
                if (this.soundEnabled && this.sounds[sound]) {
                    // –ö–ª–æ–Ω–∏—Ä—É–µ–º –∑–≤—É–∫ –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
                    this.sounds[sound].currentTime = 0;
                    this.sounds[sound].play().catch(e => console.log("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞:", e));
                }
            }
            
            loadHighscore() {
                try {
                    const highscoreData = localStorage.getItem('SaveKittensHighscore');
                    return highscoreData ? JSON.parse(highscoreData).score : 0;
                } catch (e) {
                    console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∫–æ—Ä–¥–∞:", e);
                    return 0;
                }
            }
            
            saveHighscore(score) {
                if (score > this.highscore) {
                    this.highscore = score;
                    try {
                        localStorage.setItem('SaveKittensHighscore', JSON.stringify({ score: this.highscore }));
                    } catch (e) {
                        console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∫–æ—Ä–¥–∞:", e);
                    }
                }
            }
            
            createOutlinedText(text, fontSize, color, outlineColor, outlineSize = 2) {
                this.ctx.font = `bold ${fontSize}px Arial`;
                this.ctx.fillStyle = color;
                this.ctx.strokeStyle = outlineColor;
                this.ctx.lineWidth = outlineSize;
                this.ctx.strokeText(text, 0, 0);
                this.ctx.fillText(text, 0, 0);
                
                return {
                    width: this.ctx.measureText(text).width,
                    height: fontSize
                };
            }
            
            drawOutlinedText(text, x, y, fontSize, color, outlineColor, outlineSize = 2) {
                this.ctx.font = `bold ${fontSize}px Arial`;
                this.ctx.fillStyle = color;
                this.ctx.strokeStyle = outlineColor;
                this.ctx.lineWidth = outlineSize;
                this.ctx.strokeText(text, x, y);
                this.ctx.fillText(text, x, y);
                
                return {
                    width: this.ctx.measureText(text).width,
                    height: fontSize
                };
            }
            
            startNewGame() {
                this.gameState = 'game';
                this.score = 0;
                this.level = 1;
                this.kittens = [];
                for (let i = 0; i < 5; i++) {
                    this.kittens.push(new Kitten(this.WIDTH, this.HEIGHT));
                }
                this.crocs = [];
                for (let i = 0; i < 3; i++) {
                    this.crocs.push(new Crocodile(this.kittens, this.level, this.WIDTH, this.HEIGHT));
                }
            }
            
            drawMainMenu() {
                // –†–∏—Å—É–µ–º —Ñ–æ–Ω
                if (this.images.menuBg && this.resourcesLoaded) {
                    this.ctx.drawImage(this.images.menuBg, 0, 0, this.WIDTH, this.HEIGHT);
                } else {
                    this.ctx.fillStyle = '#6496C8';
                    this.ctx.fillRect(0, 0, this.WIDTH, this.HEIGHT);
                }
                
                // –†–∏—Å—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
                const titleTextSize = Math.floor(this.WIDTH * 0.07);
                const titleSize = this.drawOutlinedText("–°–ø–∞—Å–∏ –∫–æ—Ç–∏–∫–æ–≤!", 
                    this.WIDTH / 2 - this.ctx.measureText("–°–ø–∞—Å–∏ –∫–æ—Ç–∏–∫–æ–≤!").width / 2, 
                    50 + titleTextSize / 2, titleTextSize, this.RED, this.BLACK);
                
                // –†–∏—Å—É–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞—á–∞—Ç—å"
                const startTextSize = Math.floor(this.WIDTH * 0.05);
                this.ctx.font = `bold ${startTextSize}px Arial`;
                const startText = "–ù–∞—á–∞—Ç—å";
                const startTextWidth = this.ctx.measureText(startText).width;
                
                this.startButtonRect = {
                    x: this.WIDTH / 2 - startTextWidth / 2,
                    y: this.HEIGHT - 150,
                    width: startTextWidth,
                    height: startTextSize
                };
                
                this.drawOutlinedText(startText, 
                    this.startButtonRect.x, 
                    this.startButtonRect.y + startTextSize / 2, 
                    startTextSize, this.RED, this.BLACK);
                
                // –†–∏—Å—É–µ–º —Ä–µ–∫–æ—Ä–¥
                const highscoreTextSize = Math.floor(this.WIDTH * 0.05);
                const highscoreText = `–†–µ–∫–æ—Ä–¥: ${this.highscore}`;
                const highscoreTextWidth = this.ctx.measureText(highscoreText).width;
                
                this.drawOutlinedText(highscoreText, 
                    this.WIDTH / 2 - highscoreTextWidth / 2, 
                    this.HEIGHT - 50 + highscoreTextSize / 2, 
                    highscoreTextSize, this.RED, this.BLACK);
            }
            
            drawGameOver() {
                // –†–∏—Å—É–µ–º —Ñ–æ–Ω
                if (this.images.gameOverBg && this.resourcesLoaded) {
                    this.ctx.drawImage(this.images.gameOverBg, 0, 0, this.WIDTH, this.HEIGHT);
                } else {
                    this.ctx.fillStyle = '#964B4B';
                    this.ctx.fillRect(0, 0, this.WIDTH, this.HEIGHT);
                }
                
                // –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è –ø–æ–¥–ª–æ–∂–∫–∞
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                this.ctx.fillRect(50, this.HEIGHT / 2 - 150, this.WIDTH - 100, 300);
                
                // –†–∏—Å—É–µ–º —Ç–µ–∫—Å—Ç
                const gameOverTextSize = Math.floor(this.WIDTH * 0.06);
                const smallTextSize = Math.floor(this.WIDTH * 0.04);
                
                let yPos = this.HEIGHT / 2 - 120;
                
                // "–¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª!"
                this.ctx.font = `bold ${gameOverTextSize}px Arial`;
                const gameOverText = "–¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª!";
                const gameOverTextWidth = this.ctx.measureText(gameOverText).width;
                
                this.drawOutlinedText(gameOverText, 
                    this.WIDTH / 2 - gameOverTextWidth / 2, 
                    yPos + gameOverTextSize / 2, 
                    gameOverTextSize, this.WHITE, this.BLACK);
                yPos += 60;
                
                // "–í–∞—à —Å—á—ë—Ç"
                this.ctx.font = `bold ${smallTextSize}px Arial`;
                const scoreText = `–í–∞—à —Å—á—ë—Ç: ${this.score}`;
                const scoreTextWidth = this.ctx.measureText(scoreText).width;
                
                this.drawOutlinedText(scoreText, 
                    this.WIDTH / 2 - scoreTextWidth / 2, 
                    yPos + smallTextSize / 2, 
                    smallTextSize, this.WHITE, this.BLACK);
                yPos += 50;
                
                // "–†–µ–∫–æ—Ä–¥"
                const highscoreText = `–†–µ–∫–æ—Ä–¥: ${this.highscore}`;
                const highscoreTextWidth = this.ctx.measureText(highscoreText).width;
                
                this.drawOutlinedText(highscoreText, 
                    this.WIDTH / 2 - highscoreTextWidth / 2, 
                    yPos + smallTextSize / 2, 
                    smallTextSize, this.WHITE, this.BLACK);
                yPos += 70;
                
                // "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞"
                const retryText = "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞";
                const retryTextWidth = this.ctx.measureText(retryText).width;
                
                this.retryButtonRect = {
                    x: this.WIDTH / 2 - retryTextWidth / 2,
                    y: yPos,
                    width: retryTextWidth,
                    height: smallTextSize
                };
                
                this.drawOutlinedText(retryText, 
                    this.retryButtonRect.x, 
                    yPos + smallTextSize / 2, 
                    smallTextSize, this.WHITE, this.BLACK);
                yPos += 60;
                
                // "–í—ã–π—Ç–∏"
                const exitText = "–í—ã–π—Ç–∏";
                const exitTextWidth = this.ctx.measureText(exitText).width;
                
                this.exitButtonRect = {
                    x: this.WIDTH / 2 - exitTextWidth / 2,
                    y: yPos,
                    width: exitTextWidth,
                    height: smallTextSize
                };
                
                this.drawOutlinedText(exitText, 
                    this.exitButtonRect.x, 
                    yPos + smallTextSize / 2, 
                    smallTextSize, this.WHITE, this.BLACK);
            }
            
            drawGame() {
                // –û—á–∏—â–∞–µ–º —Ö–æ–ª—Å—Ç
                this.ctx.fillStyle = this.WHITE;
                this.ctx.fillRect(0, 0, this.WIDTH, this.HEIGHT);
                
                // –†–∏—Å—É–µ–º –∫–æ—Ç–∏–∫–æ–≤
                for (const kitten of this.kittens) {
                    kitten.draw(this.ctx, this.images.kitten);
                }
                
                // –†–∏—Å—É–µ–º –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤
                for (const croc of this.crocs) {
                    croc.draw(this.ctx, this.images.croc);
                }
                
                // –†–∏—Å—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                this.drawUI();
            }
            
            drawUI() {
                this.ctx.font = 'bold 30px Arial';
                this.ctx.fillStyle = this.RED;
                
                const scoreText = `–û—á–∫–∏: ${this.score}`;
                const levelText = `–£—Ä–æ–≤–µ–Ω—å: ${this.level}`;
                
                this.ctx.fillText(scoreText, 10, 35);
                this.ctx.fillText(levelText, 10, 75);
            }
            
            handleClick(e) {
                const rect = this.canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                if (this.gameState === 'menu') {
                    if (this.isPointInRect(x, y, this.startButtonRect)) {
                        this.playSound('click');
                        this.startNewGame();
                    }
                } else if (this.gameState === 'game') {
                    let crocClicked = false;
                    for (let i = this.crocs.length - 1; i >= 0; i--) {
                        if (this.crocs[i].isClicked({x, y})) {
                            this.playSound('click');
                            this.crocs.splice(i, 1);
                            this.score += 1;
                            crocClicked = true;
                            break;
                        }
                    }
                } else if (this.gameState === 'gameOver') {
                    if (this.isPointInRect(x, y, this.retryButtonRect)) {
                        this.playSound('click');
                        this.startNewGame();
                    } else if (this.isPointInRect(x, y, this.exitButtonRect)) {
                        this.playSound('click');
                        this.gameState = 'menu';
                    }
                }
            }
            
            handleTouch(e) {
                e.preventDefault();
                if (e.touches.length > 0) {
                    const rect = this.canvas.getBoundingClientRect();
                    const touch = e.touches[0];
                    const x = touch.clientX - rect.left;
                    const y = touch.clientY - rect.top;
                    
                    // –î–µ–ª–µ–≥–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞–∂–∞—Ç–∏—è –º–µ—Ç–æ–¥—É handleClick
                    this.handleClick({clientX: touch.clientX, clientY: touch.clientY});
                }
            }
            
            isPointInRect(x, y, rect) {
                return x >= rect.x && x <= rect.x + rect.width &&
                       y >= rect.y && y <= rect.y + rect.height;
            }
            
            update(deltaTime) {
                if (this.gameState === 'game') {
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ—Ç–∏–∫–æ–≤
                    for (const kitten of this.kittens) {
                        kitten.move(deltaTime, this.WIDTH, this.HEIGHT);
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫—Ä–æ–∫–æ–¥–∏–ª–æ–≤
                    for (const croc of this.crocs) {
                        croc.move(this.kittens, deltaTime);
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
                    for (let i = this.crocs.length - 1; i >= 0; i--) {
                        for (let j = this.kittens.length - 1; j >= 0; j--) {
                            if (Math.abs(this.crocs[i].x - this.kittens[j].x) < 30 && 
                                Math.abs(this.crocs[i].y - this.kittens[j].y) < 30) {
                                this.kittens.splice(j, 1);
                                this.playSound('eat');
                                break;
                            }
                        }
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
                    if (this.crocs.length === 0) {
                        this.level += 1;
                        for (let i = 0; i < 2 + this.level; i++) {
                            this.crocs.push(new Crocodile(this.kittens, this.level, this.WIDTH, this.HEIGHT));
                        }
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏–µ –ø—Ä–æ–∏–≥—Ä—ã—à–∞
                    if (this.kittens.length === 0) {
                        this.saveHighscore(this.score);
                        this.gameState = 'gameOver';
                    }
                }
            }
            
            gameLoop(timestamp) {
                // –†–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏
                const deltaTime = timestamp - this.lastTime;
                this.lastTime = timestamp;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏
                this.update(deltaTime / 1000);
                
                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
                if (this.gameState === 'menu') {
                    this.drawMainMenu();
                } else if (this.gameState === 'game') {
                    this.drawGame();
                } else if (this.gameState === 'gameOver') {
                    this.drawGameOver();
                }
                
                // –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
                requestAnimationFrame(this.gameLoop.bind(this));
            }
        }
        
        // –ö–ª–∞—Å—Å –ö–æ—Ç–µ–Ω–æ–∫
        class Kitten {
            constructor(width, height) {
                this.x = Math.random() * (width - 100) + 50;
                this.y = Math.random() * (height - 100) + 50;
                this.speed = Math.random() * 2 + 1;
                this.dx = (Math.random() > 0.5 ? 1 : -1) * this.speed;
                this.dy = (Math.random() > 0.5 ? 1 : -1) * this.speed;
                this.size = 50;
            }
            
            move(deltaTime, width, height) {
                // –°–ª—É—á–∞–π–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                if (Math.random() < 0.02) {
                    this.dx = (Math.random() > 0.5 ? 1 : -1) * this.speed;
                    this.dy = (Math.random() > 0.5 ? 1 : -1) * this.speed;
                }
                
                // –î–≤–∏–∂–µ–Ω–∏–µ
                this.x += this.dx * deltaTime * 60;
                this.y += this.dy * deltaTime * 60;
                
                // –ù–µ –≤—ã—Ö–æ–¥–∏–º –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞
                this.x = Math.max(0, Math.min(width - this.size, this.x));
                this.y = Math.max(0, Math.min(height - this.size, this.y));
            }
            
            draw(ctx, image) {
                if (image && image.complete) {
                    ctx.drawImage(image, this.x, this.y, this.size, this.size);
                } else {
                    // –ó–∞–≥–ª—É—à–∫–∞ –µ—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ
                    ctx.fillStyle = '#FFC896';
                    ctx.fillRect(this.x, this.y, this.size, this.size);
                }
            }
        }
        
        // –ö–ª–∞—Å—Å –ö—Ä–æ–∫–æ–¥–∏–ª
        class Crocodile {
            constructor(kittens, speedMultiplier, width, height) {
                // –†–∞–∑–º–µ—â–∞–µ–º –∫—Ä–æ–∫–æ–¥–∏–ª–∞ –ø–æ–¥–∞–ª—å—à–µ –æ—Ç –∫–æ—Ç—è—Ç
                let attempts = 0;
                let validPosition = false;
                
                while (attempts < 100 && !validPosition) {
                    this.x = Math.random() * (width - 100) + 50;
                    this.y = Math.random() * (height - 100) + 50;
                    
                    validPosition = true;
                    for (const kitten of kittens) {
                        if (Math.abs(this.x - kitten.x) < 100 && Math.abs(this.y - kitten.y) < 100) {
                            validPosition = false;
                            break;
                        }
                    }
                    
                    attempts++;
                }
                
                this.speed = (Math.random() + 1) * speedMultiplier;
                this.target = null;
                this.smoothDx = 0;
                this.smoothDy = 0;
                this.width = 80;
                this.height = 50;
            }
            
            move(kittens, deltaTime) {
                if (kittens.length > 0) {
                    // –í—ã–±–∏—Ä–∞–µ–º –Ω–æ–≤—É—é —Ü–µ–ª—å –∏–ª–∏ –µ—Å–ª–∏ —Ç–µ–∫—É—â–∞—è –∏—Å—á–µ–∑–ª–∞
                    if (!this.target || !kittens.includes(this.target) || Math.random() < 0.01) {
                        this.target = kittens[Math.floor(Math.random() * kittens.length)];
                    }
                    
                    if (this.target) {
                        const dx = this.target.x - this.x;
                        const dy = this.target.y - this.y;
                        const dist = Math.max(Math.sqrt(dx * dx + dy * dy), 0.1);
                        
                        const targetDx = this.speed * dx / dist;
                        const targetDy = this.speed * dy / dist;
                        
                        // –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
                        this.smoothDx = this.smoothDx * 0.9 + targetDx * 0.1;
                        this.smoothDy = this.smoothDy * 0.9 + targetDy * 0.1;
                        
                        this.x += this.smoothDx * deltaTime * 60;
                        this.y += this.smoothDy * deltaTime * 60;
                    }
                }
            }
            
            draw(ctx, image) {
                if (image && image.complete) {
                    ctx.drawImage(image, this.x, this.y, this.width, this.height);
                } else {
                    // –ó–∞–≥–ª—É—à–∫–∞ –µ—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ
                    ctx.fillStyle = '#329632';
                    ctx.fillRect(this.x, this.y, this.width, this.height);
                }
            }
            
            isClicked(pos) {
                return pos.x >= this.x && pos.x <= this.x + this.width &&
                       pos.y >= this.y && pos.y <= this.height;
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        window.onload = () => {
            new SaveKittensGame();
        };
    </script>
</body>
</html>